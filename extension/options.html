<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Message Generator Settings</title>
    <style>
      body { font-family: Segoe UI, Arial, sans-serif; margin: 16px; background: #f7f7f8; }
      .container { max-width: 860px; margin: 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.06); }
      
      /* Tab Navigation */
      .tab-nav { display: flex; border-bottom: 1px solid #d0d7de; margin: 0; }
      .tab-button { background: none; border: none; padding: 12px 20px; cursor: pointer; font-size: 14px; color: #666; border-bottom: 2px solid transparent; }
      .tab-button.active { color: #0a66c2; border-bottom-color: #0a66c2; font-weight: 600; }
      .tab-button:hover { background: #f7f7f8; }
      
      /* Tab Content */
      .tab-content { padding: 20px 24px; }
      .tab-pane { display: none; }
      .tab-pane.active { display: block; }
      
      /* Form Styles */
      label { display: block; margin-top: 10px; font-weight: 600; }
      input, textarea, select { width: 100%; padding: 8px; margin-top: 6px; }
      input, textarea, select { border: 1px solid #d0d7de; border-radius: 8px; }
      input:focus, textarea:focus, select:focus { outline: 2px solid #0a66c233; }
      .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
      .actions { margin-top: 16px; display: flex; gap: 8px; align-items: center; }
      .muted { color: #666; font-weight: 400; }
      h2 { margin: 0 0 4px 0; }
      .sub { color: #666; margin: 0 0 16px 0; }
      button { border-radius: 8px; border: 1px solid #c7c7c7; padding: 8px 12px; cursor: pointer; }
      #save { background: #0a66c2; color: #fff; border: none; }

      /* Loading spinner */
      .loading { display: inline-flex; align-items: center; gap: 8px; color: #666; }
      .spinner { 
        border: 2px solid #f3f3f3; 
        border-top: 2px solid #0a66c2; 
        border-radius: 50%; 
        width: 18px; 
        height: 18px; 
        animation: spin 1s linear infinite; 
      }
      @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Tab Navigation -->
      <div class="tab-nav">
        <button class="tab-button active" data-tab="profile">Profile</button>
        <button class="tab-button" data-tab="settings">API Settings</button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <!-- Profile Tab -->
        <div id="profile-tab" class="tab-pane active">
          <h2>Your Profile</h2>
          <p class="sub">We'll use this to personalize your outreach. You can also prefill from your LinkedIn profile and edit.</p>
          <div class="row">
          <div>
            <label>Name <input id="myName" placeholder="e.g., Jane Doe" /></label>
          </div>
          <div>
            <label>Title <input id="myTitle" placeholder="e.g., Product Manager" /></label>
          </div>
          </div>
          <label>About you <textarea id="aboutMe" rows="3" placeholder="A short summary about you..."></textarea></label>
          <label>Interests <textarea id="interests" rows="3" placeholder="Topics you care about..."></textarea></label>
          <label>Strengths <textarea id="strengths" rows="3" placeholder="Key skills and strengths..."></textarea></label>
          <label>Other <textarea id="other" rows="3" placeholder="Any other relevant information..."></textarea></label>

          <div class="actions">
            <button id="save">Save</button>
            <button id="prefill">Prefill from LinkedIn</button>
            <span id="prefillLoading" class="loading" style="display:none;">
              <span id="prefillLoadingText">Opening your profileâ€¦</span>
              <span class="spinner"></span>
            </span>
            <span id="status" class="muted"></span>
          </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-pane">
          <h2>API Configuration</h2>
          <p class="sub">Configure your AI service settings for message generation.</p>
          
          <label>Gemini API Key 
            <input id="geminiApiKey" type="password" placeholder="Enter your Gemini API key..." />
          </label>
          <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: #0a66c2; margin-left: 8px;">Get your API key</a>
          <p class="muted" style="margin-top: 4px; font-size: 13px;">
            Your API key is stored locally in your Chrome extension storage. When you use Generate Message or Prefill from LinkedIn, your API key and the necessary request data are sent over HTTPS to the configured AI backend service to process your request. They are not sent anywhere else. See our
            <a href="https://github.com/MohdYasser1/linkedin-customized-messages-generator/blob/main/PRIVACY_POLICY.md" target="_blank" style="color: #0a66c2;">Privacy Policy</a>.
          </p>

          <div style="margin-top: 12px; background: #f7f7f8; border: 1px solid #e6e6e6; border-radius: 8px; padding: 12px;">
            <div style="font-weight: 600; margin-bottom: 6px;">Data Use & Privacy (Summary)</div>
            <ul style="margin: 0 0 6px 18px; padding: 0; color: #555;">
              <li>Your inputs here (name, title, etc.) are saved in Chrome sync storage on your device.</li>
              <li>When you generate a message or prefill your profile, the LinkedIn page content (main section HTML) and your profile data are sent to the backend AI service to create the output.</li>
              <li>Your API key is transmitted only to that backend to fulfill your request.</li>
            </ul>
            <div class="muted" style="font-size: 12px;">Not affiliated with or endorsed by LinkedIn.</div>
          </div>

          <div class="actions">
            <button id="saveApiKey">Save API Key</button>
            <button id="testApiKey" style="background: #f0f0f0; color: #333;">Test Connection</button>
            <button id="clearAllData" style="background: #fff; color: #b00020; border-color: #e6b8b8;">Clear All Data</button>
            <span id="apiStatus" class="muted"></span>
          </div>
        </div>
      </div>
    </div>

    <script src="shared.js"></script>
    <script type="module" src="options.js"></script>
  </body>
</html>